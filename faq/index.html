---
title: "Frequently Asked Questions"
layout: default
section: faq
---

<div class="page-header section-header">
<h3>Frequently Asked Questions</h3>
<p>
There's usually some questions that get asked multiple times on either
the forum or github issues. This section tries to tackle some of them so as 
to save developers time when they come across them.
</p>

<ul>
    <li><a href="#tpacket-v3">Sniffer packet capture is delayed</a></li>
    <li><a href="#tcp-streams"><i>TCPStreamFollower</i> class issues</a></li>
    <li><a href="#config-issues"><i>config.h</i> can't be found</a></li>
    <li><a href="#linking">Can't find symbols when building your application</a></li>
    <li><a href="#sniffer-error">Sniffing packets fails</a></li>
    <li><a href="#build">I am having trouble building a utility that uses libtins</a></li>
</ul>
</div>

<h3 id="tpacket-v3">Sniffer packet capture is delayed</h3>
<p>
When <i>libpcap 1.5.0</i> was released, they made some changes to the way packets
are captured by introducing <i>TPACKET_V3</i>, a different way for the kernel to deliver
packets to userland. As a default, this packet capture mechanism uses a buffered mode,
which will try to create batches of packets before delivering to userspace. As a result,
you might see that you get chunks of packets every e.g. one second. That is, you won't
see any packets being captured and suddenly you'll get a burst of several of them.
</p>
<p>
As much as this is expected using <i>TPACKET_V3</i>, they did introduce a way to
use a non buffered mode in case you need to implement low latency packet capture 
applications. This can be configured by using the immediate mode capture on
<i>libpcap</i> handles. On libtins, this can be done the following way:
</p>
{% highlight cpp %}
// Create a sniffer configuration and configure the immediate mode
SnifferConfiguration config;
config.set_immediate_mode(true);

// Now create the sniffer object using the configuration
Sniffer sniffer("eth0", config);
{% endhighlight %}

<h3 id="tcp-streams"><i>TCPStreamFollower</i> class issues</h3>
<p>
The <i>TCPStreamFollower</i> class was a very dirty piece of code that was
written for an unrelated reason and somehow made it to the library. It is 
a very limited interface to reassembling <i>TCP</i> streams and it should
have never been included in <i>libtins</i>. This class is currently
deprecated, so you should try moving away from it soon, although hopefully
nobody is actually using it.
</p>
<p>
After a few years, the <i>TCP</i> stream reassembling code was re-written,
now using C++11 functions as callbacks, providing a much cleaner and
powerful way to do the same. Check the
<a href="/tutorial/tcp-streams/">TCP streams tutorial</a> to get
started with it.
</p>

<h3 id="config-issues"><i>config.h</i> can't be found</h3>
<p>
The <i>tins/config.h</i> is generated by <i>CMake</i> after it finishes
configuring the project. Therefore, you <b>need to run CMake</b> before
you can actually build and use the library, assuming you're building
it from the source code. Make sure to check the
<a href="/download/#compiling">downloads section</a> which
explains how to build the library.
</p>

<h3 id="linking">Can't find symbols when building your application</h3>
<p>
If you get some error like the following when trying to build an application
that is using <i>libtins</i>:
</p>
{% highlight bash %}
test.cpp:(.text+0x83): undefined reference to `Tins::operator<<(std::ostream&, Tins::IPv4Address const&)'
test.cpp:(.text+0xb7): undefined reference to `Tins::operator<<(std::ostream&, Tins::IPv4Address const&)'
{% endhighlight %}
<p>
Then you're very likely not linking it against libtins. Make sure to
follow the instructions under the
<a href="/download/#using">using <i>libtins</i> section</a>
of the website
</p>

<h3 id="sniffer-error">Sniffing packets fails</h3>
<p>
Capturing packets requires administrator privileges. If you're on GNU/Linux
or OSX/FreeBSD, make sure you're running your application as <i>root</i>.
</p>
<p>
If you're using Windows, you need to have the WinPCAP driver installed and
running to be able to capture packets. Note that this is different from the
WinPCAP libraries/include files that you would need in order to build
<i>libtins</i>.
</p>

<h3 id="build">I am having trouble building a utility that uses libtins</h3>
<p>
If you get random dependency errors when building something that uses <i>libtins</i>, consider building with
    a known good environment inside docker, like <a href="https://github.com/pollere/pping">pping</a> does <a href="https://github.com/dagelf/pping/tree/master/docker">here.</a>
</p>
